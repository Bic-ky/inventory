{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h1>Create a New Bill</h1>

  <form method="POST">
    {% csrf_token %}
    {{ form.non_field_errors }}
    
    <div class="form-group">
      <label for="id_delivery">Delivery</label>
      {{ form.delivery }}
    </div>

    <div class="form-group">
      <label for="id_payment_category">Payment Category</label>
      {{ form.payment_category }}
    </div>

    <div class="form-group" id="online-method-container">
      <label for="id_online_method">Online Method</label>
      {{ form.online_method }}
    </div>

    <div class="form-group">
      <label for="id_receivable_amount">Receivable Amount</label>
      {{ form.receivable_amount }}
    </div>

    <div class="form-group">
      <label for="id_amount_received_by_driver">Amount Received by Driver</label>
      {{ form.amount_received_by_driver }}
    </div>

    <div class="form-group">
      <label for="id_notes">Notes</label>
      {{ form.notes }}
    </div>

    <button type="submit" class="btn btn-primary">Save Bill</button>
    <a href="{% url 'bill_list' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const paymentCategorySelect = document.getElementById("id_payment_category");
  const onlineMethodContainer = document.getElementById("online-method-container");

  function toggleOnlineMethod() {
    if (paymentCategorySelect.value === "online") {
      onlineMethodContainer.style.display = "block";
    } else {
      onlineMethodContainer.style.display = "none";
    }
  }

  toggleOnlineMethod(); // On load
  paymentCategorySelect.addEventListener("change", toggleOnlineMethod); // On change
});
</script>
{% endblock content %}
